<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!--CDN GSAP-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.2/TweenMax.min.js"></script>
  <title>970x90</title>
  <link rel="stylesheet" href="styles/style.css" />
  <script src="scripts/script.js"></script>
</head>

<body>
  <div id="container">
    <div id="ad" class="collapsed">
      <div id="banner">
        <div id="bannerBckg"><img src="images/background.jpg" alt="Banner Background"></div>
        <div id="ctaText"><img src="images/ctaText.svg" alt="CTA Text"></div>
        <div id="ctaArrows"><img src="images/ctaArrows.svg" alt="CTA Arrows"></div>
        <div id="text1"><img src="images/text1.png" alt="Text 1"></div>
        <div id="expandBtn"></div>
      </div>
      <div id="panel">
        <div id="panelText"><img src="images/panelText.png" alt="Panel Text"> </div>
        <div id="clickthroughButton"><img src="images/ctaBtn.png" alt="Clickthrough Button"> </div>
        <div id="closeButton"><img src="images/close_button.png" alt="Close Button"></div>
        <!-- Video Container -->
        <div id="videoContainer">
          <video id="si_vid" width="100%" height="auto" poster="images/poster.gif" controls>
            <source src="videos/REY_FOIL_COFFEEandPEAR_MAC_FB.mp4" type="video/mp4"> Your browser does not support the video tag.
          </video>
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
    var adDiv = document.getElementById('ad');
    var isExpanded = false;
    var si_vid = document.getElementById('si_vid');
    var expandBtn = document.getElementById('expandBtn');
    var closeButton = document.getElementById('closeButton');

    // Setup video autoplay and control
    function setupVideo() {
      // Auto-play video if required
      if (false) { // Change to `true` if you want autoplay
        si_vid.play();
      }
    }

    // Expand Banner
    expandBtn.addEventListener("click", function (e) {
      expand();
    });

    // Collapse Banner
    closeButton.addEventListener("click", function () {
      collapse();
    });

    // Expand Ad
    function expand() {
      adDiv.classList.remove("collapsed");
      adDiv.classList.add("expanded");
      TweenMax.to("#panel", 0.5, { x: 0, ease: Expo.easeOut });
      setupVideo();
      isExpanded = true;
    }

    // Collapse Ad
    function collapse() {
      TweenMax.set("#clickthroughButton", { alpha: 0 });
      adDiv.classList.remove("expanded");
      adDiv.classList.add("collapsed");
      si_vid.pause(); // Pause the video when collapsed
      isExpanded = false;
    }

    // Wait for window load before starting
    window.addEventListener("load", function () {
      setupVideo();
    });
  </script>
</body>

</html>